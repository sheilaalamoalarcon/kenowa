---
import CustomButton from "@/components/CustomButton";
import CustomInput from "../components/CustomInput";
import AuthLayout from "@/layouts/AuthLayout.astro";
---

<AuthLayout title="Sign in">
  <CustomInput
    placeholder="Enter your email"
    name="email"
    type="email"
    required
    client:load
  />
  <CustomInput
    placeholder="Enter your password"
    name="password"
    type="password"
    required
    client:load
  />
  <CustomInput
    placeholder="Enter your image"
    name="image"
    type="file"
    required
    client:load
  />
  <CustomInput
    placeholder="Enter your username"
    name="username"
    type="text"
    required
    client:load
  />
  <CustomInput
    placeholder="Enter your lastname"
    name="lastname"
    client:load
    required
    type="text"
  />
  <CustomButton title={"sign in"} style="margin:5rem 0rem" />
  <script>
    import { CUser } from "@/constants/classes";

    const inputs = document.getElementsByClassName("custom-input");
    const email = inputs[0] as HTMLInputElement;
    const password = inputs[1] as HTMLInputElement;
    const image = inputs[2] as HTMLInputElement;
    const username = inputs[3] as HTMLInputElement;
    const lastname = inputs[4] as HTMLInputElement;
    const user = new CUser(
      email.value,
      password.value,
      image.files as any,
      username.value,
      lastname.value
    );

    const button = document.getElementById("custom-button");
    button?.addEventListener("click", user.CreateUser);
  </script>
</AuthLayout>
